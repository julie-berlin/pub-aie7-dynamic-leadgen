{
  "StartSessionRequest": {
    "description": "Request to start a new survey session with UTM tracking.",
    "properties": {
      "form_id": {
        "description": "Form configuration identifier",
        "title": "Form Id",
        "type": "string"
      },
      "client_id": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Optional client identifier",
        "title": "Client Id"
      },
      "utm_source": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Marketing source (facebook, google, etc.)",
        "title": "Utm Source"
      },
      "utm_medium": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Marketing medium (social, cpc, email)",
        "title": "Utm Medium"
      },
      "utm_campaign": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Campaign name",
        "title": "Utm Campaign"
      },
      "utm_content": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Ad content identifier",
        "title": "Utm Content"
      },
      "utm_term": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Search term",
        "title": "Utm Term"
      },
      "landing_page": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Landing page URL",
        "title": "Landing Page"
      },
      "metadata": {
        "anyOf": [
          {
            "additionalProperties": true,
            "type": "object"
          },
          {
            "type": "null"
          }
        ],
        "description": "Additional metadata",
        "title": "Metadata"
      }
    },
    "required": [
      "form_id"
    ],
    "title": "StartSessionRequest",
    "type": "object"
  },
  "SubmitResponsesRequest": {
    "description": "Request to submit survey responses for a step.",
    "properties": {
      "session_id": {
        "description": "Session identifier",
        "title": "Session Id",
        "type": "string"
      },
      "responses": {
        "description": "User responses for current step",
        "items": {
          "additionalProperties": true,
          "type": "object"
        },
        "title": "Responses",
        "type": "array"
      }
    },
    "required": [
      "session_id",
      "responses"
    ],
    "title": "SubmitResponsesRequest",
    "type": "object"
  },
  "AbandonSessionRequest": {
    "description": "Request to mark a session as abandoned.",
    "properties": {
      "session_id": {
        "description": "Session identifier",
        "title": "Session Id",
        "type": "string"
      },
      "reason": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Abandonment reason",
        "title": "Reason"
      }
    },
    "required": [
      "session_id"
    ],
    "title": "AbandonSessionRequest",
    "type": "object"
  },
  "StartSessionResponse": {
    "$defs": {
      "QuestionData": {
        "description": "Individual question data for frontend.",
        "properties": {
          "id": {
            "description": "Question ID within form",
            "title": "Id",
            "type": "integer"
          },
          "question": {
            "description": "Original question text",
            "title": "Question",
            "type": "string"
          },
          "phrased_question": {
            "description": "AI-adapted question text",
            "title": "Phrased Question",
            "type": "string"
          },
          "data_type": {
            "default": "text",
            "description": "Expected response data type",
            "title": "Data Type",
            "type": "string"
          },
          "is_required": {
            "default": false,
            "description": "Whether question is required",
            "title": "Is Required",
            "type": "boolean"
          },
          "options": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Multiple choice options",
            "title": "Options"
          },
          "scoring_rubric": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Scoring criteria",
            "title": "Scoring Rubric"
          }
        },
        "required": [
          "id",
          "question",
          "phrased_question"
        ],
        "title": "QuestionData",
        "type": "object"
      }
    },
    "description": "Response for session initialization.",
    "properties": {
      "session_id": {
        "description": "Unique session identifier",
        "title": "Session Id",
        "type": "string"
      },
      "questions": {
        "description": "Initial questions",
        "items": {
          "$ref": "#/$defs/QuestionData"
        },
        "title": "Questions",
        "type": "array"
      },
      "headline": {
        "description": "Engaging step headline",
        "title": "Headline",
        "type": "string"
      },
      "motivation": {
        "description": "Motivational content",
        "title": "Motivation",
        "type": "string"
      },
      "step": {
        "default": 1,
        "description": "Current step number",
        "title": "Step",
        "type": "integer"
      },
      "progress": {
        "additionalProperties": true,
        "description": "Progress indicators",
        "title": "Progress",
        "type": "object"
      }
    },
    "required": [
      "session_id",
      "questions",
      "headline",
      "motivation"
    ],
    "title": "StartSessionResponse",
    "type": "object"
  },
  "StepResponse": {
    "$defs": {
      "QuestionData": {
        "description": "Individual question data for frontend.",
        "properties": {
          "id": {
            "description": "Question ID within form",
            "title": "Id",
            "type": "integer"
          },
          "question": {
            "description": "Original question text",
            "title": "Question",
            "type": "string"
          },
          "phrased_question": {
            "description": "AI-adapted question text",
            "title": "Phrased Question",
            "type": "string"
          },
          "data_type": {
            "default": "text",
            "description": "Expected response data type",
            "title": "Data Type",
            "type": "string"
          },
          "is_required": {
            "default": false,
            "description": "Whether question is required",
            "title": "Is Required",
            "type": "boolean"
          },
          "options": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Multiple choice options",
            "title": "Options"
          },
          "scoring_rubric": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "description": "Scoring criteria",
            "title": "Scoring Rubric"
          }
        },
        "required": [
          "id",
          "question",
          "phrased_question"
        ],
        "title": "QuestionData",
        "type": "object"
      }
    },
    "description": "Response for survey step progression.",
    "properties": {
      "session_id": {
        "description": "Session identifier",
        "title": "Session Id",
        "type": "string"
      },
      "step": {
        "description": "Current step number",
        "title": "Step",
        "type": "integer"
      },
      "questions": {
        "description": "Questions for this step",
        "items": {
          "$ref": "#/$defs/QuestionData"
        },
        "title": "Questions",
        "type": "array"
      },
      "headline": {
        "description": "Engaging step headline",
        "title": "Headline",
        "type": "string"
      },
      "motivation": {
        "description": "Motivational content",
        "title": "Motivation",
        "type": "string"
      },
      "progress": {
        "additionalProperties": true,
        "description": "Progress information",
        "title": "Progress",
        "type": "object"
      },
      "completed": {
        "default": false,
        "description": "Whether survey is complete",
        "title": "Completed",
        "type": "boolean"
      }
    },
    "required": [
      "session_id",
      "step",
      "questions",
      "headline",
      "motivation"
    ],
    "title": "StepResponse",
    "type": "object"
  },
  "CompletionResponse": {
    "$defs": {
      "CompletionType": {
        "enum": [
          "qualified",
          "unqualified",
          "abandoned",
          "qualified_fallback",
          "unqualified_error"
        ],
        "title": "CompletionType",
        "type": "string"
      },
      "LeadStatus": {
        "enum": [
          "unknown",
          "yes",
          "maybe",
          "no"
        ],
        "title": "LeadStatus",
        "type": "string"
      }
    },
    "description": "Response for survey completion.",
    "properties": {
      "session_id": {
        "description": "Session identifier",
        "title": "Session Id",
        "type": "string"
      },
      "lead_status": {
        "$ref": "#/$defs/LeadStatus",
        "description": "Final lead qualification"
      },
      "final_score": {
        "description": "Final lead score",
        "title": "Final Score",
        "type": "integer"
      },
      "completion_message": {
        "description": "Personalized completion message",
        "title": "Completion Message",
        "type": "string"
      },
      "completion_type": {
        "$ref": "#/$defs/CompletionType",
        "description": "Type of completion"
      },
      "completed_at": {
        "description": "Completion timestamp",
        "format": "date-time",
        "title": "Completed At",
        "type": "string"
      }
    },
    "required": [
      "session_id",
      "lead_status",
      "final_score",
      "completion_message",
      "completion_type",
      "completed_at"
    ],
    "title": "CompletionResponse",
    "type": "object"
  },
  "SessionStatusResponse": {
    "$defs": {
      "AbandonmentStatus": {
        "enum": [
          "active",
          "at_risk",
          "high_risk",
          "abandoned"
        ],
        "title": "AbandonmentStatus",
        "type": "string"
      },
      "LeadStatus": {
        "enum": [
          "unknown",
          "yes",
          "maybe",
          "no"
        ],
        "title": "LeadStatus",
        "type": "string"
      }
    },
    "description": "Response for session status inquiry.",
    "properties": {
      "session_id": {
        "description": "Session identifier",
        "title": "Session Id",
        "type": "string"
      },
      "form_id": {
        "description": "Form configuration ID",
        "title": "Form Id",
        "type": "string"
      },
      "step": {
        "description": "Current step number",
        "title": "Step",
        "type": "integer"
      },
      "completed": {
        "description": "Whether session is completed",
        "title": "Completed",
        "type": "boolean"
      },
      "lead_status": {
        "$ref": "#/$defs/LeadStatus",
        "description": "Current lead qualification"
      },
      "current_score": {
        "description": "Current lead score",
        "title": "Current Score",
        "type": "integer"
      },
      "responses_count": {
        "description": "Number of responses collected",
        "title": "Responses Count",
        "type": "integer"
      },
      "started_at": {
        "description": "Session start timestamp",
        "format": "date-time",
        "title": "Started At",
        "type": "string"
      },
      "last_updated": {
        "description": "Last update timestamp",
        "format": "date-time",
        "title": "Last Updated",
        "type": "string"
      },
      "abandonment_status": {
        "$ref": "#/$defs/AbandonmentStatus",
        "description": "Abandonment risk status"
      }
    },
    "required": [
      "session_id",
      "form_id",
      "step",
      "completed",
      "lead_status",
      "current_score",
      "responses_count",
      "started_at",
      "last_updated",
      "abandonment_status"
    ],
    "title": "SessionStatusResponse",
    "type": "object"
  },
  "ErrorResponse": {
    "description": "Standard error response.",
    "properties": {
      "error": {
        "description": "Error type",
        "title": "Error",
        "type": "string"
      },
      "message": {
        "description": "Human-readable error message",
        "title": "Message",
        "type": "string"
      },
      "details": {
        "anyOf": [
          {
            "additionalProperties": true,
            "type": "object"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Additional error details",
        "title": "Details"
      },
      "timestamp": {
        "description": "Error timestamp",
        "format": "date-time",
        "title": "Timestamp",
        "type": "string"
      }
    },
    "required": [
      "error",
      "message"
    ],
    "title": "ErrorResponse",
    "type": "object"
  },
  "QuestionData": {
    "description": "Individual question data for frontend.",
    "properties": {
      "id": {
        "description": "Question ID within form",
        "title": "Id",
        "type": "integer"
      },
      "question": {
        "description": "Original question text",
        "title": "Question",
        "type": "string"
      },
      "phrased_question": {
        "description": "AI-adapted question text",
        "title": "Phrased Question",
        "type": "string"
      },
      "data_type": {
        "default": "text",
        "description": "Expected response data type",
        "title": "Data Type",
        "type": "string"
      },
      "is_required": {
        "default": false,
        "description": "Whether question is required",
        "title": "Is Required",
        "type": "boolean"
      },
      "options": {
        "anyOf": [
          {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Multiple choice options",
        "title": "Options"
      },
      "scoring_rubric": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "Scoring criteria",
        "title": "Scoring Rubric"
      }
    },
    "required": [
      "id",
      "question",
      "phrased_question"
    ],
    "title": "QuestionData",
    "type": "object"
  }
}